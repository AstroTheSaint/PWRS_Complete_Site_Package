<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Artist Portal - Mobile Demo</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        /* Mobile-First Base Styles */
        :root {
            --safe-area-inset-top: env(safe-area-inset-top, 0px);
            --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
            --header-height: clamp(48px, 8vw, 60px);
            --bottom-nav-height: clamp(56px, 10vw, 64px);
            --content-padding: clamp(12px, 3vw, 16px);
            --primary-color: #1DB954;
            --bg-color: #121212;
            --card-bg: #181818;
            --text-primary: #FFFFFF;
            --text-secondary: #B3B3B3;
            --gradient-dark: linear-gradient(180deg, rgba(18, 18, 18, 0.8) 0%, var(--bg-color) 100%);
            --card-border-radius: clamp(12px, 2vw, 16px);
            --font-size-base: clamp(14px, 2vw, 16px);
            --font-size-large: clamp(16px, 2.5vw, 18px);
            --font-size-small: clamp(12px, 1.5vw, 14px);
        }

        /* Base Styles */
        body {
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
            font-family: -apple-system, BlinkMacSystemFont, 'Inter', sans-serif;
            background: var(--bg-color);
            color: var(--text-primary);
            line-height: 1.5;
            font-size: var(--font-size-base);
            -webkit-text-size-adjust: 100%;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Layout Container */
        .container {
            width: 100%;
            max-width: 100%;
            padding: 0;
            margin: 0;
            overflow-x: hidden;
        }

        /* Header Improvements */
        .mobile-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: var(--header-height);
            padding: calc(var(--safe-area-inset-top) + 8px) var(--content-padding) 8px;
            background: var(--gradient-dark);
            z-index: 1000;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .header-title {
            font-size: clamp(18px, 4vw, 24px);
            font-weight: 700;
        }

        .profile-info {
            display: flex;
            align-items: center;
            gap: clamp(8px, 2vw, 12px);
        }

        .profile-image {
            width: clamp(28px, 6vw, 32px);
            height: clamp(28px, 6vw, 32px);
            border-radius: 50%;
            background: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: clamp(14px, 3vw, 16px);
        }

        .profile-name {
            font-size: clamp(14px, 3vw, 16px);
            font-weight: 600;
            color: var(--text-primary);
        }

        /* Welcome Section */
        .welcome-section {
            background: var(--card-bg);
            border-radius: var(--card-border-radius);
            padding: clamp(16px, 4vw, 24px);
            margin-bottom: clamp(12px, 3vw, 16px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .welcome-header {
            font-size: clamp(20px, 5vw, 28px);
            font-weight: 700;
            margin-bottom: clamp(8px, 2vw, 12px);
            color: var(--text-primary);
        }

        .user-status {
            font-size: clamp(14px, 3vw, 16px);
            padding: clamp(6px, 1.5vw, 8px) clamp(12px, 3vw, 16px);
            background: rgba(29, 185, 84, 0.1);
            border-radius: 20px;
            display: inline-block;
            margin-bottom: clamp(12px, 3vw, 16px);
        }

        .progress-info {
            margin-top: 12px;
        }

        .progress-bar {
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            margin: 8px 0;
            overflow: hidden;
        }

        .progress-fill {
            width: 75%;
            height: 100%;
            background: var(--primary-color);
            border-radius: 2px;
            transition: width 0.3s ease;
        }

        .progress-text {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .progress-percentage {
            color: var(--primary-color);
            font-weight: 600;
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(min(100%, 140px), 1fr));
            gap: clamp(8px, 2vw, 12px);
            margin-bottom: clamp(12px, 3vw, 16px);
        }

        .stat-card {
            background: var(--card-bg);
            border-radius: var(--card-border-radius);
            padding: clamp(12px, 3vw, 16px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-icon {
            width: clamp(28px, 6vw, 32px);
            height: clamp(28px, 6vw, 32px);
            border-radius: 8px;
            background: rgba(29, 185, 84, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: clamp(8px, 2vw, 12px);
            font-size: clamp(16px, 3vw, 20px);
        }

        .stat-title {
            font-size: clamp(14px, 3vw, 16px);
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: clamp(4px, 1vw, 8px);
        }

        .stat-value {
            font-size: clamp(20px, 4vw, 24px);
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: clamp(4px, 1vw, 8px);
        }

        .stat-description {
            font-size: clamp(12px, 2vw, 14px);
            color: var(--text-secondary);
        }

        /* Main Content Area */
        .main-content {
            padding-top: calc(var(--header-height) + var(--safe-area-inset-top) + 8px);
            padding-bottom: calc(var(--bottom-nav-height) + var(--safe-area-inset-bottom) + 8px);
            padding-left: var(--content-padding);
            padding-right: var(--content-padding);
            display: flex;
            flex-direction: column;
            gap: clamp(12px, 3vw, 16px);
        }

        /* Section Heights */
        .globe-container {
            height: clamp(300px, 60vw, 400px);
        }

        .upcoming-shows {
            max-height: 300px;
        }

        .performance-card {
            padding: 16px;
        }

        .venue-stats {
            margin: 12px 0;
        }

        /* Card Base Style */
        .card-base {
            background: var(--card-bg);
            border-radius: 16px;
            padding: clamp(16px, 4vw, 24px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: clamp(12px, 3vw, 24px);
            width: 100%;
            box-sizing: border-box;
            overflow: hidden;
        }

        /* Card Styles */
        .card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
            overflow: hidden;
            width: 100%;
            box-sizing: border-box;
        }

        /* Stats Section */
        .stats-section {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-bottom: 8px;
        }

        .stats-card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            width: 100%;
            box-sizing: border-box;
        }

        .stat-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .stat-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary-color);
            margin: 0.5rem 0;
        }

        .stat-description {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        /* Shows Section Improvements */
        .show-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--card-border-radius);
            padding: clamp(12px, 3vw, 16px);
            margin-bottom: clamp(8px, 2vw, 12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .show-title {
            font-size: clamp(16px, 3.5vw, 20px);
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: clamp(8px, 2vw, 12px);
            line-height: 1.3;
            overflow-wrap: break-word;
            word-wrap: break-word;
            hyphens: auto;
        }

        .show-details {
            display: flex;
            flex-direction: column;
            gap: clamp(8px, 2vw, 16px);
        }

        .show-info {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            font-size: clamp(0.875rem, 1.8vw, 1rem);
            flex-wrap: wrap;
            gap: 8px;
        }

        .show-info-row {
            margin-bottom: clamp(8px, 2vw, 12px);
        }

        .show-info-label {
            font-size: clamp(12px, 2vw, 14px);
            color: var(--text-secondary);
            margin-bottom: clamp(4px, 1vw, 8px);
        }

        .show-info-value {
            font-size: clamp(14px, 2.5vw, 16px);
            line-height: 1.5;
            overflow-wrap: break-word;
            word-wrap: break-word;
            hyphens: auto;
        }

        .show-date {
            color: var(--text-secondary);
        }

        .show-status {
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .show-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(min(100%, 100px), 1fr));
            gap: clamp(8px, 2vw, 12px);
            margin-top: clamp(12px, 3vw, 16px);
        }

        .show-button {
            padding: clamp(8px, 2vw, 12px) clamp(12px, 3vw, 16px);
            border-radius: 8px;
            font-size: clamp(14px, 2.5vw, 16px);
            font-weight: 500;
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .show-button.primary {
            background: var(--primary-color);
            color: #000;
        }

        /* Ensure proper scrolling on iOS */
        .upcoming-shows::-webkit-scrollbar {
            width: 8px;
            background-color: transparent;
        }

        .upcoming-shows::-webkit-scrollbar-thumb {
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }

        .upcoming-shows::-webkit-scrollbar-track {
            background-color: transparent;
        }

        /* Globe Section */
        .globe-section {
            background: var(--card-bg);
            border-radius: var(--card-border-radius);
            padding: clamp(16px, 4vw, 24px);
            margin: clamp(8px, 2vw, 12px) 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
            width: 100%;
            box-sizing: border-box;
        }

        .globe-container {
            width: 100%;
            height: clamp(300px, 60vw, 400px);
            margin: clamp(12px, 3vw, 16px) 0 0;
            position: relative;
            overflow: hidden;
            border-radius: var(--card-border-radius);
            background: rgba(255, 255, 255, 0.02);
        }

        /* Revenue Distribution */
        .revenue-distribution {
            display: none;
        }

        .payment-details {
            margin: 8px 16px;
            border-radius: 12px;
        }

        .payment-show-item {
            padding: 16px;
        }

        .payment-show-header {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .payment-amount {
            font-size: 1.125rem;
            color: var(--primary-color);
            margin-bottom: 0.25rem;
        }

        .payment-date {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        /* Navigation */
        .nav-link {
            height: 48px;
            padding: 0 16px;
            display: flex;
            align-items: center;
            gap: 12px;
            touch-action: manipulation;
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: var(--bottom-nav-height);
            padding: 8px 0 calc(8px + var(--safe-area-inset-bottom));
            background: var(--gradient-dark);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-around;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .nav-item {
            position: relative;
            padding: clamp(8px, 2vw, 12px);
            border-radius: 8px;
            color: var(--text-secondary);
            text-decoration: none;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: clamp(8px, 2vw, 12px);
            font-size: clamp(12px, 2vw, 14px);
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .nav-item.active {
            color: var(--primary-color);
            background: rgba(29, 185, 84, 0.1);
        }

        .nav-item.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 24px;
            background: var(--primary-color);
            border-radius: 0 2px 2px 0;
        }

        .nav-icon {
            font-size: clamp(20px, 4vw, 24px);
        }

        /* Touch Feedback */
        .touch-feedback {
            position: relative;
            overflow: hidden;
        }

        .touch-feedback::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.2) 0%, transparent 60%);
            border-radius: 50%;
            transform: translate(-50%, -50%) scale(0);
            opacity: 0;
            pointer-events: none;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }

        .touch-feedback:active::after {
            transform: translate(-50%, -50%) scale(2);
            opacity: 1;
        }

        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 4px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
        }

        /* Safe Area Support */
        @supports(padding: max(0px)) {
            .header {
                padding-top: max(8px, env(safe-area-inset-top));
            }

            .bottom-nav {
                padding-bottom: max(8px, env(safe-area-inset-bottom));
            }

            .main-content {
                padding-bottom: calc(var(--bottom-nav-height) + max(8px, env(safe-area-inset-bottom)));
            }

            .card-base {
                padding: max(16px, 4vw);
                margin-bottom: max(12px, 3vw);
            }

            .show-item {
                padding: max(16px, 3vw);
                margin-bottom: max(12px, 2vw);
            }
        }

        /* Desktop Responsive Styles */
        @media screen and (min-width: 1024px) {
            .main-content {
                max-width: 1200px;
                margin-left: 240px;
                padding: 6rem 2rem 2rem;
                display: grid;
                grid-template-columns: repeat(12, 1fr);
                gap: 2rem;
            }

            .stats-card {
                grid-column: span 6;
            }

            .performance-card {
                grid-column: span 12;
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 2rem;
            }

            .performance-overview {
                padding-right: 2rem;
            }

            .venue-stats {
                gap: 2rem;
            }

            .venue-type {
                padding: 1.5rem;
                transition: transform 0.2s ease;
            }

            .venue-type:hover {
                transform: translateY(-5px);
            }

            .venue-count {
                font-size: 2.5rem;
            }

            .requirements-list {
                margin-top: 0;
            }

            .requirement-item {
                transition: transform 0.2s ease, background-color 0.2s ease;
            }

            .requirement-item:hover {
                transform: translateX(5px);
                background: rgba(255, 255, 255, 0.05);
            }

            .upcoming-shows {
                grid-column: span 6;
                max-height: 600px;
            }

            .globe-section {
                grid-column: span 12;
                height: 500px;
            }

            .globe-container {
                height: 400px;
            }

            .mobile-nav {
                display: none;
            }

            .desktop-nav {
                position: fixed;
                left: 0;
                top: 0;
                bottom: 0;
                width: 240px;
                background: var(--card-bg);
                padding: 2rem 1rem;
                border-right: 1px solid rgba(255, 255, 255, 0.1);
                display: flex;
                flex-direction: column;
                gap: 1rem;
            }

            .nav-item {
                padding: 1rem;
                border-radius: 8px;
                transition: background-color 0.2s ease;
            }

            .nav-item:hover {
                background: rgba(255, 255, 255, 0.05);
            }

            .nav-item.active {
                background: rgba(29, 185, 84, 0.1);
            }

            .menu-button {
                display: none;
            }

            .mobile-header {
                padding: 1.5rem 2rem;
                margin-left: 240px;
            }

            .main-content {
                margin-left: 240px;
            }

            .header-title {
                font-size: 1.75rem;
            }

            .user-status {
                padding: 0.75rem 1.5rem;
                font-size: 1rem;
            }

            .revenue-distribution {
                grid-column: span 6;
                margin-bottom: 0;
            }
            
            .revenue-item {
                padding: 1.25rem;
            }
            
            .revenue-item:hover {
                transform: translateX(5px);
                background: rgba(255, 255, 255, 0.05);
            }

            .revenue-indicator {
                width: 10px;
                height: 48px;
            }

            .revenue-label {
                font-size: 1rem;
            }

            .revenue-value {
                font-size: 1.25rem;
            }
        }

        /* Add smooth transitions for all interactive elements */
        .nav-item,
        .show-item,
        .requirement-item,
        .venue-type,
        .stats-card,
        .performance-card {
            transition: all 0.2s ease;
        }

        /* Navigation Highlight Improvements */
        .nav-link {
            position: relative;
            border-left: 3px solid transparent;
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            color: var(--text-secondary);
            text-decoration: none;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
            font-weight: 500;
        }

        .nav-link.active {
            background: rgba(29, 185, 84, 0.1);
            border-left-color: var(--primary-color);
            color: var(--text-primary);
        }

        .nav-link:hover:not(.active) {
            background: rgba(255, 255, 255, 0.05);
            border-left-color: rgba(29, 185, 84, 0.5);
        }

        /* Messages Section Improvements */
        .messages-container {
            display: flex;
            flex-direction: column;
            height: calc(100vh - 180px);
            overflow: hidden;
        }

        .messages-list {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
        }

        .message-threads {
            height: calc(100vh - 200px);
            overflow-y: auto;
            padding: 1rem;
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
        }

        .message-thread {
            display: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .message-thread.active {
            display: flex;
            flex-direction: column;
            opacity: 1;
        }

        /* Loading Indicator */
        .messages-loading {
            text-align: center;
            padding: 1rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
            display: none;
        }

        .messages-loading.visible {
            display: block;
        }

        /* Scrollbar Styling */
        .messages-list::-webkit-scrollbar,
        .message-threads::-webkit-scrollbar {
            width: 6px;
        }

        .messages-list::-webkit-scrollbar-track,
        .message-threads::-webkit-scrollbar-track {
            background: transparent;
        }

        .messages-list::-webkit-scrollbar-thumb,
        .message-threads::-webkit-scrollbar-thumb {
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
        }

        /* Payment Details Styles */
        .payment-details {
            display: none;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            margin: 0.5rem 0;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .payment-details.active {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .revenue-item {
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .revenue-item:hover {
            background: rgba(255, 255, 255, 0.05);
            transform: translateX(5px);
        }

        .revenue-item.active {
            background: rgba(255, 255, 255, 0.05);
        }

        /* Performance Card */
        .performance-card {
            background: var(--card-bg);
            border-radius: var(--card-border-radius);
            padding: clamp(16px, 4vw, 24px);
            margin: clamp(8px, 2vw, 12px) 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
            width: 100%;
            box-sizing: border-box;
        }

        .venue-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(min(100%, 100px), 1fr));
            gap: clamp(8px, 2vw, 12px);
            margin: clamp(12px, 3vw, 16px) 0;
        }

        .venue-type {
            background: rgba(255, 255, 255, 0.02);
            border-radius: var(--card-border-radius);
            padding: clamp(12px, 3vw, 16px);
            text-align: center;
        }

        /* Ensure proper spacing between sections */
        .section {
            margin: 8px 0;
            width: 100%;
        }

        /* Responsive Layout Improvements */
        @media screen and (min-width: 768px) {
            .show-actions {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media screen and (max-width: 480px) {
            .show-info {
                flex-direction: column;
                align-items: flex-start;
            }

            .show-status {
                align-self: flex-start;
            }
        }

        /* Small screen optimizations */
        @media screen and (max-width: 360px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }

            .show-actions {
                grid-template-columns: 1fr;
            }

            .venue-stats {
                grid-template-columns: 1fr;
            }
        }

        /* Large screen optimizations */
        @media screen and (min-width: 768px) {
            .main-content {
                max-width: 600px;
                margin: 0 auto;
            }
        }

        /* Menu Button Styles */
        .menu-button {
            position: fixed;
            top: calc(var(--safe-area-inset-top) + 8px);
            left: 16px;
            z-index: 1100;
            background: none;
            border: none;
            display: flex;
            flex-direction: column;
            gap: 5px;
            padding: 8px;
            cursor: pointer;
        }

        .menu-button span {
            display: block;
            width: 24px;
            height: 2px;
            background-color: var(--primary-color);
            border-radius: 2px;
        }

        @media (min-width: 1024px) {
            .menu-button {
                display: none;
            }
        }

        /* Main Content Area */
        .main-content {
            padding-top: calc(var(--header-height) + var(--safe-area-inset-top) + 8px);
            padding-bottom: calc(var(--bottom-nav-height) + var(--safe-area-inset-bottom) + 8px);
            padding-left: var(--content-padding);
            padding-right: var(--content-padding);
            display: flex;
            flex-direction: column;
            gap: clamp(12px, 3vw, 16px);
        }

        /* Desktop Navigation */
        .desktop-nav {
            display: none;
            position: fixed;
            left: 0;
            top: 0;
            bottom: 0;
            width: 240px;
            background: var(--card-bg);
            padding: 1rem;
            z-index: 1000;
            flex-direction: column;
            gap: 1rem;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
        }

        .desktop-nav.active {
            display: flex !important;
        }

        /* Responsive Layouts */
        @media screen and (min-width: 768px) and (max-width: 1023px) {
            .main-content {
                max-width: 600px;
                margin: 0 auto;
            }
        }

        @media screen and (min-width: 1024px) {
            .main-content {
                max-width: 1200px;
                margin-left: 240px;
                padding: 6rem 2rem 2rem;
                display: grid;
                grid-template-columns: repeat(12, 1fr);
                gap: 2rem;
            }
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }

        .modal-content {
            position: relative;
            background: var(--card-bg);
            margin: 5% auto;
            padding: 20px;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            border-radius: 16px;
            overflow-y: auto;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .modal-header h2 {
            margin: 0;
            font-size: 1.5rem;
            color: var(--text-primary);
        }

        .close-button {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 24px;
            cursor: pointer;
            padding: 5px;
            transition: color 0.2s ease;
        }

        .close-button:hover {
            color: var(--text-primary);
        }

        .modal-body {
            color: var(--text-primary);
        }

        /* Document Preview Styles */
        .document-preview {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .document-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .document-icon {
            width: 40px;
            height: 40px;
            background: var(--primary-color);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .document-info {
            flex: 1;
        }

        .document-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .document-meta {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .document-actions {
            display: flex;
            gap: 12px;
            margin-top: 16px;
        }

        .document-button {
            flex: 1;
            padding: 12px;
            border-radius: 8px;
            border: none;
            background: var(--primary-color);
            color: #000;
            font-weight: 500;
            cursor: pointer;
            transition: opacity 0.2s ease;
        }

        .document-button:hover {
            opacity: 0.9;
        }

        /* Message Thread Styles */
        .message-thread {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .message {
            display: flex;
            gap: 12px;
            padding: 12px;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.05);
        }

        .message.sent {
            background: rgba(29, 185, 84, 0.1);
            margin-left: 20%;
        }

        .message.received {
            background: rgba(255, 255, 255, 0.05);
            margin-right: 20%;
        }

        .message-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }

        .message-content {
            flex: 1;
        }

        .message-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 4px;
            font-size: 0.9rem;
        }

        .message-sender {
            font-weight: 600;
            color: var(--text-primary);
        }

        .message-time {
            color: var(--text-secondary);
        }

        .message-text {
            line-height: 1.5;
        }

        .message-attachment {
            margin-top: 8px;
            padding: 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .attachment-icon {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--primary-color);
            border-radius: 4px;
        }

        .attachment-info {
            flex: 1;
        }

        .attachment-name {
            font-size: 0.9rem;
            font-weight: 500;
        }

        .attachment-size {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .attachment-download {
            padding: 6px 12px;
            background: var(--primary-color);
            border-radius: 4px;
            color: #000;
            font-size: 0.8rem;
            font-weight: 500;
            cursor: pointer;
        }

        .rider-section {
            margin-bottom: 24px;
            padding: 16px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
        }

        .rider-section h3 {
            color: #1DB954;
            margin-bottom: 12px;
            font-size: 1.1em;
        }

        .rider-section ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .rider-section li {
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
        }

        .rider-section li:before {
            content: "•";
            color: #1DB954;
            position: absolute;
            left: 0;
        }

        .stage-plot {
            margin: 16px 0;
            background: rgba(255, 255, 255, 0.05);
            padding: 16px;
            border-radius: 8px;
        }

        .stage-plot img {
            width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        @media (min-width: 768px) {
            .rider-section {
                padding: 24px;
            }

            .stage-plot {
                padding: 24px;
            }
        }

        /* Header Styles */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 60px;
            padding: 0 1rem;
            background: var(--sidebar-bg);
            display: flex;
            align-items: center;
            justify-content: space-between;
            z-index: 1000;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .header-title {
            font-size: 1.2rem;
            font-weight: 500;
            color: var(--text-primary);
        }

        .view-demo-btn {
            padding: 0.5rem 1rem;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: background 0.2s;
        }

        .main-content {
            padding-top: calc(60px + 1rem);
        }

        @media (max-width: 768px) {
            .header {
                padding: 0 0.75rem;
            }

            .header-title {
                font-size: 1rem;
            }

            .view-demo-btn {
                padding: 0.4rem 0.8rem;
                font-size: 0.8rem;
            }

            .main-content {
                margin-left: 0;
                padding: calc(60px + 0.5rem) 1rem 1rem;
            }

            .nav-toggle {
                margin-right: 0.5rem;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-left">
            <button class="nav-toggle">
                <i class="fas fa-bars"></i>
            </button>
            <span class="header-title">Powers Artist Portal</span>
        </div>
        <button class="view-demo-btn">View Demo</button>
    </header>

    <main class="main-content">
        <div class="welcome-section">
            <div class="welcome-header">Welcome Back!</div>
            <div class="user-status">🏆 Gold Artist</div>
            <div class="progress-info">
                <div class="progress-text">Progress to Platinum</div>
                <div class="progress-bar">
                    <div class="progress-fill"></div>
                </div>
                <div class="progress-text">
                    <span class="progress-percentage">75%</span> Complete
                </div>
            </div>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon">📈</div>
                <div class="stat-title">Monthly Revenue</div>
                <div class="stat-value">$156,000</div>
                <div class="stat-description">+24% from last month</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">🎵</div>
                <div class="stat-title">Shows This Month</div>
                <div class="stat-value">12</div>
                <div class="stat-description">4 upcoming shows</div>
            </div>
        </div>

        <div class="card-base revenue-distribution">
            <div class="stat-header">
                <div class="stat-title">Show Payment Status</div>
            </div>
            <div class="revenue-list">
                <div class="revenue-item" onclick="togglePaymentDetails('paid')">
                    <div class="revenue-indicator" style="background: #1DB954;"></div>
                    <div class="revenue-info">
                        <div class="revenue-label">Paid in Full</div>
                        <div class="revenue-value">
                            40%
                            <span class="revenue-trend">+5%</span>
                        </div>
                    </div>
                </div>
                <div id="paid-details" class="payment-details">
                    <div class="payment-show-item">
                        <div class="payment-show-header">Ultra Music Festival</div>
                        <div class="payment-amount">$85,000</div>
                        <div class="payment-date">Paid on March 15, 2024</div>
                    </div>
                    <div class="payment-show-item">
                        <div class="payment-show-header">EDC Las Vegas</div>
                        <div class="payment-amount">$120,000</div>
                        <div class="payment-date">Paid on March 10, 2024</div>
                    </div>
                    <div class="payment-show-item">
                        <div class="payment-show-header">XS Las Vegas</div>
                        <div class="payment-amount">$65,000</div>
                        <div class="payment-date">Paid on March 5, 2024</div>
                    </div>
                </div>

                <div class="revenue-item" onclick="togglePaymentDetails('partial')">
                    <div class="revenue-indicator" style="background: #FF9800;"></div>
                    <div class="revenue-info">
                        <div class="revenue-label">Partial Payment</div>
                        <div class="revenue-value">
                            35%
                            <span class="revenue-trend">+10%</span>
                        </div>
                    </div>
                </div>
                <div id="partial-details" class="payment-details">
                    <div class="payment-show-item">
                        <div class="payment-show-header">Tomorrowland</div>
                        <div class="payment-amount">$75,000 / $150,000</div>
                        <div class="payment-date">50% Deposit Received - Balance Due April 30</div>
                    </div>
                    <div class="payment-show-item">
                        <div class="payment-show-header">Story Miami</div>
                        <div class="payment-amount">$25,000 / $50,000</div>
                        <div class="payment-date">50% Deposit Received - Balance Due April 15</div>
                    </div>
                </div>

                <div class="revenue-item" onclick="togglePaymentDetails('due')">
                    <div class="revenue-indicator" style="background: #FF5252;"></div>
                    <div class="revenue-info">
                        <div class="revenue-label">Payment Due</div>
                        <div class="revenue-value">
                            25%
                            <span class="revenue-trend negative">-15%</span>
                        </div>
                    </div>
                </div>
                <div id="due-details" class="payment-details">
                    <div class="payment-show-item">
                        <div class="payment-show-header">Coachella</div>
                        <div class="payment-amount">$200,000</div>
                        <div class="payment-date">Due April 20, 2024</div>
                    </div>
                    <div class="payment-show-item">
                        <div class="payment-show-header">LIV Miami</div>
                        <div class="payment-amount">$80,000</div>
                        <div class="payment-date">Due April 25, 2024</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card-base globe-section">
            <div class="globe-header">
                <div class="stat-title">Global Tour Overview</div>
            </div>
            <div class="globe-container" id="globe-container"></div>
        </div>

        <div class="card-base upcoming-shows">
            <div class="shows-header">
                <h2 class="section-title">Upcoming Shows</h2>
            </div>
            <div class="show-list">
                <div class="show-item">
                    <div class="show-title">Summerfest</div>
                    <div class="show-info-row">
                        <div class="show-info-label">Performance Type</div>
                        <div class="show-info-value">Festival Headliner at Henry Maier Festival Park, Milwaukee, WI</div>
                    </div>
                    <div class="show-details">
                        <div class="show-info">
                            <span class="show-date">July 12, 2025</span>
                            <span class="show-status status-confirmed">Confirmed</span>
                        </div>
                        <div class="show-info">
                            <span>Offer From</span>
                            <span>Milwaukee World Festival, Inc.</span>
                        </div>
                        <div class="show-info">
                            <span>Confirmed Fee</span>
                            <span>$175,000 - $225,000</span>
                        </div>
                    </div>
                    <div class="show-actions">
                        <button class="show-button" onclick="showContract('Summerfest')">View Contract</button>
                        <button class="show-button" onclick="showRider('Summerfest')">View Rider</button>
                        <button class="show-button primary" onclick="showMessages('Summerfest')">Messages</button>
                    </div>
                </div>

                <div class="show-item">
                    <div class="show-title">Dubai Arena International Music Festival</div>
                    <div class="show-info-row">
                        <div class="show-info-label">Performance Type</div>
                        <div class="show-info-value">International Festival at Coca-Cola Arena, Dubai, UAE</div>
                    </div>
                    <div class="show-details">
                        <div class="show-info">
                            <span class="show-date">April 20, 2025</span>
                            <span class="show-status status-confirmed">Confirmed</span>
                        </div>
                        <div class="show-info">
                            <span>Offer From</span>
                            <span>Live Nation Middle East</span>
                        </div>
                        <div class="show-info">
                            <span>Confirmed Fee</span>
                            <span>$250,000</span>
                        </div>
                    </div>
                    <div class="show-actions">
                        <button class="show-button" onclick="showContract('Dubai')">View Contract</button>
                        <button class="show-button" onclick="showRider('Dubai')">View Rider</button>
                        <button class="show-button primary" onclick="showMessages('Dubai')">Messages</button>
                    </div>
                </div>

                <div class="show-item">
                    <div class="show-title">XS Nightclub Residency</div>
                    <div class="show-info-row">
                        <div class="show-info-label">Performance Type</div>
                        <div class="show-info-value">Club Residency (6 Shows) at XS Nightclub, Las Vegas, NV</div>
                    </div>
                    <div class="show-details">
                        <div class="show-info">
                            <span class="show-date">May 15-30, 2025</span>
                            <span class="show-status status-confirmed">Confirmed</span>
                        </div>
                        <div class="show-info">
                            <span>Offer From</span>
                            <span>Wynn Nightlife</span>
                        </div>
                        <div class="show-info">
                            <span>Confirmed Fee</span>
                            <span>$900,000 Total</span>
                        </div>
                    </div>
                    <div class="show-actions">
                        <button class="show-button" onclick="showContract('XS')">View Contract</button>
                        <button class="show-button" onclick="showRider('XS')">View Rider</button>
                        <button class="show-button primary" onclick="showMessages('XS')">Messages</button>
                    </div>
                </div>

                <div class="show-item">
                    <div class="show-title">Sydney Opera House Special Performance</div>
                    <div class="show-info-row">
                        <div class="show-info-label">Performance Type</div>
                        <div class="show-info-value">Special Performance at Sydney Opera House, Sydney, Australia</div>
                    </div>
                    <div class="show-details">
                        <div class="show-info">
                            <span class="show-date">January 10, 2025</span>
                            <span class="show-status status-confirmed">Confirmed</span>
                        </div>
                        <div class="show-info">
                            <span>Offer From</span>
                            <span>Sydney Opera House Trust</span>
                        </div>
                        <div class="show-info">
                            <span>Confirmed Fee</span>
                            <span>$200,000</span>
                        </div>
                    </div>
                    <div class="show-actions">
                        <button class="show-button" onclick="showContract('Sydney')">View Contract</button>
                        <button class="show-button" onclick="showRider('Sydney')">View Rider</button>
                        <button class="show-button primary" onclick="showMessages('Sydney')">Messages</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="card-base performance-card">
            <div class="stat-header">
                <div class="stat-title">Performance Overview</div>
            </div>
            <div class="venue-stats">
                <div class="venue-type">
                    <div class="venue-count">12</div>
                    <div class="venue-label">Festivals</div>
                </div>
                <div class="venue-type">
                    <div class="venue-count">28</div>
                    <div class="venue-label">Arenas</div>
                </div>
                <div class="venue-type">
                    <div class="venue-count">45</div>
                    <div class="venue-label">Clubs</div>
                </div>
            </div>
            <div class="requirements-list">
                <div class="requirement-item">
                    <div class="requirement-icon">💰</div>
                    <div class="requirement-info">
                        <div class="requirement-title">Coachella Deposit</div>
                        <div class="requirement-details">50% deposit received</div>
                    </div>
                    <div class="requirement-status status-completed">Completed</div>
                </div>
                <div class="requirement-item">
                    <div class="requirement-icon">📱</div>
                    <div class="requirement-info">
                        <div class="requirement-title">Social Media Post</div>
                        <div class="requirement-details">Instagram Story Required</div>
                    </div>
                    <div class="requirement-status status-pending">Due Apr 12</div>
                </div>
                <div class="requirement-item">
                    <div class="requirement-icon">📸</div>
                    <div class="requirement-info">
                        <div class="requirement-title">LIV Promo Content</div>
                        <div class="requirement-details">Feed Post + Story</div>
                    </div>
                    <div class="requirement-status status-pending">Due Apr 15</div>
                </div>
            </div>
        </div>
    </main>

    <nav class="mobile-nav">
        <a href="#" class="nav-item active">
            <span class="nav-icon">📊</span>
            Dashboard
        </a>
        <a href="#" class="nav-item">
            <span class="nav-icon">🌍</span>
            Markets
        </a>
        <a href="#" class="nav-item">
            <span class="nav-icon">📅</span>
            Schedule
        </a>
        <a href="#" class="nav-item">
            <span class="nav-icon">⚙️</span>
            Settings
        </a>
    </nav>

    <button class="menu-button">
        <span></span>
        <span></span>
        <span></span>
    </button>

    <!-- Add Desktop Navigation -->
    <nav class="desktop-nav">
        <div class="nav-header">
            <h2>Navigation</h2>
        </div>
        <a href="#dashboard" class="nav-item active">
            <i class="fas fa-chart-line nav-icon"></i>
            <span>Dashboard</span>
        </a>
        <a href="#shows" class="nav-item">
            <i class="fas fa-calendar-alt nav-icon"></i>
            <span>Shows</span>
        </a>
        <a href="#revenue" class="nav-item">
            <i class="fas fa-dollar-sign nav-icon"></i>
            <span>Revenue</span>
        </a>
        <a href="#globe" class="nav-item">
            <i class="fas fa-globe nav-icon"></i>
            <span>Globe</span>
        </a>
        <a href="#messages" class="nav-item">
            <i class="fas fa-envelope nav-icon"></i>
            <span>Messages</span>
        </a>
    </nav>

    <!-- Modal for Contract/Rider/Messages -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-title"></h2>
                <button class="close-button" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body" id="modal-body">
                <!-- Content will be dynamically inserted here -->
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Smooth scrolling for iOS
            document.documentElement.style.scrollBehavior = 'smooth';
            
            // Prevent rubber-banding on iOS
            document.body.addEventListener('touchmove', function(e) {
                if (this.scrollHeight === this.clientHeight) {
                    e.preventDefault();
                }
            }, { passive: false });

            // Add touch feedback to interactive elements
            const touchElements = document.querySelectorAll('.stat-card, .revenue-item, .show-item, .nav-item');
            touchElements.forEach(element => {
                element.addEventListener('touchstart', function() {
                    this.style.transform = 'scale(0.98)';
                    this.style.transition = 'transform 0.2s ease';
                });

                element.addEventListener('touchend', function() {
                    this.style.transform = 'scale(1)';
                });
            });

            // Optimize scrolling performance
            const scrollableElements = document.querySelectorAll('.upcoming-shows, .messages-list');
            let scrollTimeout;
            
            scrollableElements.forEach(element => {
                element.addEventListener('scroll', () => {
                    if (!element.style.willChange) {
                        element.style.willChange = 'scroll-position';
                    }
                    
                    clearTimeout(scrollTimeout);
                    scrollTimeout = setTimeout(() => {
                        element.style.willChange = 'auto';
                    }, 150);
                }, { passive: true });
            });
        });

        // Add navigation highlighting
        document.addEventListener('DOMContentLoaded', function() {
            const navItems = document.querySelectorAll('.nav-item');
            
            navItems.forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Remove active class from all items
                    navItems.forEach(nav => nav.classList.remove('active'));
                    
                    // Add active class to clicked item
                    this.classList.add('active');
                });
            });
        });

        // Add message loading function
        function loadMoreMessages(container) {
            const loadingIndicator = document.createElement('div');
            loadingIndicator.className = 'messages-loading visible';
            loadingIndicator.textContent = 'Loading more messages...';
            container.appendChild(loadingIndicator);

            setTimeout(() => {
                loadingIndicator.remove();
                
                for (let i = 0; i < 5; i++) {
                    const messageItem = document.createElement('div');
                    messageItem.className = `message-item ${i % 2 === 0 ? 'received' : 'sent'}`;
                    messageItem.innerHTML = `
                        <div class="message-content">
                            <div class="message-header">
                                <span class="sender-name">${i % 2 === 0 ? 'Venue Manager' : 'You'}</span>
                                <span class="message-time">${new Date().toLocaleTimeString()}</span>
                            </div>
                            <div class="message-text">Previous message #${i + 1}</div>
                        </div>
                    `;
                    container.insertBefore(messageItem, container.firstChild);
                }
            }, 1000);
        }

        // Update navigation and scroll handling
        document.addEventListener('DOMContentLoaded', () => {
            // Navigation handling
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    
                    // Remove active class from all links
                    document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                    
                    // Add active class to clicked link
                    link.classList.add('active');
                    
                    const tabName = link.getAttribute('href').substring(1);
                    showTab(tabName);
                });
            });

            // Infinite scroll for messages
            document.querySelectorAll('.messages-list, .message-threads').forEach(container => {
                let isLoading = false;
                let scrollTimeout;

                container.addEventListener('scroll', () => {
                    clearTimeout(scrollTimeout);
                    scrollTimeout = setTimeout(() => {
                        if (isLoading) return;

                        const scrollTop = container.scrollTop;
                        
                        if (scrollTop < 100) {
                            isLoading = true;
                            loadMoreMessages(container);
                            
                            const currentHeight = container.scrollHeight;
                            setTimeout(() => {
                                container.scrollTop = container.scrollHeight - currentHeight + 100;
                                isLoading = false;
                            }, 1100);
                        }
                    }, 150);
                });
            });

            // Show initial tab
            const hash = window.location.hash.slice(1) || 'dashboard';
            showTab(hash);
        });

        // Update showTab function
        function showTab(tabName) {
            requestAnimationFrame(() => {
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.style.display = 'none';
                });

                const selectedTab = document.getElementById(tabName);
                if (selectedTab) {
                    selectedTab.style.display = 'block';
                    
                    // Optimize performance for visible content
                    const scrollableElements = selectedTab.querySelectorAll('.upcoming-shows, .messages-list');
                    scrollableElements.forEach(element => {
                        element.style.willChange = 'scroll-position';
                        setTimeout(() => {
                            element.style.willChange = 'auto';
                        }, 300);
                    });
                }
            });
        }

        // Add this after your existing script
        function togglePaymentDetails(type) {
            const detailsElement = document.getElementById(`${type}-details`);
            const allDetails = document.querySelectorAll('.payment-details');
            const allItems = document.querySelectorAll('.revenue-item');
            
            // Close all other details
            allDetails.forEach(detail => {
                if (detail !== detailsElement) {
                    detail.classList.remove('active');
                }
            });

            // Remove active state from all items
            allItems.forEach(item => {
                item.classList.remove('active');
            });

            // Toggle clicked details
            detailsElement.classList.toggle('active');
            
            // Add active state to clicked item
            const clickedItem = detailsElement.previousElementSibling;
            if (detailsElement.classList.contains('active')) {
                clickedItem.classList.add('active');
            }
        }

        // Add Hamburger Menu Toggle
        const menuButton = document.querySelector('.menu-button');
        const desktopNav = document.querySelector('.desktop-nav');

        menuButton?.addEventListener('click', () => {
            desktopNav?.classList.toggle('active');
        });

        // Globe Visualization
        function initGlobe() {
            const container = document.getElementById('globe-container');
            if (!container) return;

            // Clear any existing content
            container.innerHTML = '';

            const width = container.clientWidth;
            const height = container.clientHeight;
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ 
                antialias: true, 
                alpha: true,
                powerPreference: "high-performance"
            });
            
            renderer.setSize(width, height);
            renderer.setPixelRatio(window.devicePixelRatio);
            container.appendChild(renderer.domElement);

            // Create Earth
            const geometry = new THREE.SphereGeometry(5, 64, 64);
            const textureLoader = new THREE.TextureLoader();
            const earthTexture = textureLoader.load('https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/textures/planets/earth_atmos_2048.jpg');
            const bumpTexture = textureLoader.load('https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/textures/planets/earth_normal_2048.jpg');
            const specularTexture = textureLoader.load('https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/textures/planets/earth_specular_2048.jpg');
            
            const material = new THREE.MeshPhongMaterial({
                map: earthTexture,
                bumpMap: bumpTexture,
                bumpScale: 0.3,
                specularMap: specularTexture,
                specular: new THREE.Color(0x333333),
                shininess: 5
            });
            
            const earth = new THREE.Mesh(geometry, material);
            scene.add(earth);

            // Add ambient light
            const ambientLight = new THREE.AmbientLight(0x404040, 0.5);
            scene.add(ambientLight);

            // Add directional light
            const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
            directionalLight.position.set(5, 3, 5);
            scene.add(directionalLight);

            camera.position.z = 15;

            // Animation
            function animate() {
                requestAnimationFrame(animate);
                earth.rotation.y += 0.005;
                renderer.render(scene, camera);
            }

            // Handle window resize
            let resizeTimeout;
            window.addEventListener('resize', () => {
                clearTimeout(resizeTimeout);
                resizeTimeout = setTimeout(() => {
                    const width = container.clientWidth;
                    const height = container.clientHeight;
                    camera.aspect = width / height;
                    camera.updateProjectionMatrix();
                    renderer.setSize(width, height);
                    renderer.setPixelRatio(window.devicePixelRatio);
                }, 250);
            });

            // Start animation
            animate();
        }

        // Initialize globe when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            // Wait for Three.js to be fully loaded
            if (typeof THREE !== 'undefined') {
                initGlobe();
            } else {
                // If Three.js isn't loaded yet, wait for it
                const checkThree = setInterval(() => {
                    if (typeof THREE !== 'undefined') {
                        clearInterval(checkThree);
                        initGlobe();
                    }
                }, 100);
            }
        });

        // Modal Functions
        function showModal(title) {
            const modal = document.getElementById('modal');
            const modalTitle = document.getElementById('modal-title');
            modalTitle.textContent = title;
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            const modal = document.getElementById('modal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Contract View
        function showContract(show) {
            const modalBody = document.getElementById('modal-body');
            modalBody.innerHTML = `
                <div class="document-preview">
                    <div class="document-header">
                        <div class="document-icon">📄</div>
                        <div class="document-info">
                            <div class="document-title">Performance Contract - ${show}</div>
                            <div class="document-meta">Last updated: March 15, 2024</div>
                        </div>
                    </div>
                    <div class="document-actions">
                        <button class="document-button" onclick="downloadDocument('contract')">Download PDF</button>
                        <button class="document-button" onclick="previewDocument('contract')">Preview</button>
                    </div>
                </div>
                <div class="document-preview">
                    <div class="document-header">
                        <div class="document-icon">📋</div>
                        <div class="document-info">
                            <div class="document-title">Insurance Certificate</div>
                            <div class="document-meta">Valid until: December 31, 2024</div>
                        </div>
                    </div>
                    <div class="document-actions">
                        <button class="document-button" onclick="downloadDocument('insurance')">Download PDF</button>
                        <button class="document-button" onclick="previewDocument('insurance')">Preview</button>
                    </div>
                </div>
            `;
            showModal('Contract Documents');
        }

        // Rider View
        function showRider(show) {
            const modalBody = document.getElementById('modal-body');
            modalBody.innerHTML = `
                <div class="document-preview">
                    <div class="document-header">
                        <div class="document-icon">🎵</div>
                        <div class="document-info">
                            <div class="document-title">Technical Rider - ${show}</div>
                            <div class="document-meta">Version 2.1 - Last updated: March 10, 2024</div>
                        </div>
                    </div>
                    <div class="document-content">
                        <div class="rider-section">
                            <h3>Stage Requirements</h3>
                            <ul>
                                <li>Minimum stage size: 40' x 40'</li>
                                <li>Stage height: 4' - 6'</li>
                                <li>Load-in access: 8' wide minimum</li>
                                <li>Stage weight capacity: 1000 lbs/sq ft</li>
                            </ul>
                        </div>
                        <div class="rider-section">
                            <h3>Audio Requirements</h3>
                            <ul>
                                <li>Front of House console: DiGiCo SD12 or equivalent</li>
                                <li>Monitor console: DiGiCo SD12 or equivalent</li>
                                <li>PA System: L-Acoustics K2 or equivalent</li>
                                <li>Stage monitors: 8 x L-Acoustics X15 HiQ</li>
                            </ul>
                        </div>
                        <div class="rider-section">
                            <h3>Lighting Requirements</h3>
                            <ul>
                                <li>Minimum 4 x moving head fixtures</li>
                                <li>LED wash fixtures for stage coverage</li>
                                <li>DMX control system</li>
                                <li>Fog/haze system</li>
                            </ul>
                        </div>
                        <div class="rider-section">
                            <h3>Backline Requirements</h3>
                            <ul>
                                <li>2 x Pioneer CDJ-3000</li>
                                <li>1 x Pioneer DJM-900NXS2</li>
                                <li>2 x Technics SL-1200MK7</li>
                                <li>Backup equipment on standby</li>
                            </ul>
                        </div>
                        <div class="rider-section">
                            <h3>Hospitality Requirements</h3>
                            <ul>
                                <li>Private dressing room with bathroom</li>
                                <li>Security personnel: 2 minimum</li>
                                <li>Refreshments and snacks</li>
                                <li>WiFi access</li>
                            </ul>
                        </div>
                    </div>
                    <div class="document-actions">
                        <button class="document-button" onclick="downloadDocument('rider')">Download PDF</button>
                        <button class="document-button" onclick="previewDocument('rider')">Preview</button>
                    </div>
                </div>
                <div class="document-preview">
                    <div class="document-header">
                        <div class="document-icon">🎨</div>
                        <div class="document-info">
                            <div class="document-title">Stage Plot</div>
                            <div class="document-meta">Technical Layout & Specifications</div>
                        </div>
                    </div>
                    <div class="document-content">
                        <div class="stage-plot">
                            <img src="https://via.placeholder.com/600x400/1DB954/FFFFFF?text=Stage+Plot" alt="Stage Plot" style="width: 100%; border-radius: 8px;">
                        </div>
                    </div>
                    <div class="document-actions">
                        <button class="document-button" onclick="downloadDocument('stage-plot')">Download PDF</button>
                        <button class="document-button" onclick="previewDocument('stage-plot')">Preview</button>
                    </div>
                </div>
            `;
            showModal('Technical Rider');
        }

        // Messages View
        function showMessages(show) {
            const modalBody = document.getElementById('modal-body');
            modalBody.innerHTML = `
                <div class="message-thread">
                    <div class="message received">
                        <div class="message-avatar">VM</div>
                        <div class="message-content">
                            <div class="message-header">
                                <span class="message-sender">Venue Manager</span>
                                <span class="message-time">2 hours ago</span>
                            </div>
                            <div class="message-text">Hi! We're excited to have you perform at ${show}. I've attached the latest contract for your review.</div>
                            <div class="message-attachment">
                                <div class="attachment-icon">📄</div>
                                <div class="attachment-info">
                                    <div class="attachment-name">${show}_Contract_v2.pdf</div>
                                    <div class="attachment-size">2.4 MB</div>
                                </div>
                                <button class="attachment-download" onclick="downloadDocument('contract')">Download</button>
                            </div>
                        </div>
                    </div>
                    <div class="message sent">
                        <div class="message-avatar">MB</div>
                        <div class="message-content">
                            <div class="message-header">
                                <span class="message-sender">You</span>
                                <span class="message-time">1 hour ago</span>
                            </div>
                            <div class="message-text">Thanks! I'll review the contract and get back to you by tomorrow.</div>
                        </div>
                    </div>
                    <div class="message received">
                        <div class="message-avatar">VM</div>
                        <div class="message-content">
                            <div class="message-header">
                                <span class="message-sender">Venue Manager</span>
                                <span class="message-time">30 minutes ago</span>
                            </div>
                            <div class="message-text">Great! I've also attached the technical rider for your review.</div>
                            <div class="message-attachment">
                                <div class="attachment-icon">📋</div>
                                <div class="attachment-info">
                                    <div class="attachment-name">${show}_Technical_Rider.pdf</div>
                                    <div class="attachment-size">1.8 MB</div>
                                </div>
                                <button class="attachment-download" onclick="downloadDocument('rider')">Download</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="message-input">
                    <input type="text" placeholder="Type your message..." class="message-field">
                    <button class="send-button">Send</button>
                </div>
            `;
            showModal('Messages');
        }

        // Document Functions
        function downloadDocument(type) {
            // Simulate document download
            alert('Downloading document...');
        }

        function previewDocument(type) {
            // Simulate document preview
            alert('Opening document preview...');
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('modal');
            if (event.target === modal) {
                closeModal();
            }
        }
    </script>
</body>
</html> 